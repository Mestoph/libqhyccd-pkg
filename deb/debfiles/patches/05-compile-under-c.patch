Allow compilation under C
diff -urN usr/local/include/qhyccd.h usr/local/include/qhyccd.h
--- usr/local/include/qhyccd.h	2019-05-05 01:07:58.393110144 +0100
+++ usr/local/include/qhyccd.h	2019-05-05 01:04:47.042588248 +0100
@@ -7,10 +7,9 @@
 #include <qhyccd/qhyccdstruct.h>
 #include <stdint.h>
 #include <qhyccd/config.h>
+#if defined(_WIN32) || defined(__cplusplus)
 #include <functional>
-
-
-
+#endif
 
 
 #if defined (_WIN32)
@@ -28,9 +27,11 @@
 EXPORTC void STDCALL SetQHYCCDLogLevel(uint8_t logLevel);
 
 #if defined(__linux__ )&&!defined (__ANDROID__)
-
+#ifdef __cplusplus
 EXPORTC void STDCALL SetQHYCCDLogFunction(std::function<void(const std::string &message)> logFunction);
-
+#else
+EXPORTC void STDCALL SetQHYCCDLogFunction(void (*) ( const char* ));
+#endif
 #endif
 
 EXPORTC void STDCALL EnableQHYCCDMessage(bool enable);
diff -urN usr/local/include/qhyccdstruct.h usr/local/include/qhyccdstruct.h
--- usr/local/include/qhyccdstruct.h	2019-05-05 01:07:58.593102329 +0100
+++ usr/local/include/qhyccdstruct.h	2019-05-05 01:06:49.425805446 +0100
@@ -19,9 +19,15 @@
 #define EXPORTC extern "C"
 #endif
 #else
+#ifdef __cplusplus
 #define EXPORTFUNC extern "C"
 #define STDCALL
 #define EXPORTC extern "C"
+#else
+#define EXPORTFUNC
+#define STDCALL
+#define EXPORTC
+#endif
 #endif
 
 #include <stdint.h>
@@ -99,7 +105,7 @@
 }
 CCDREG;
 
-struct BIOREG
+typedef struct BIOREG
 {
   uint16_t LineSize;
   uint16_t PatchNumber;
@@ -111,7 +117,7 @@
   uint8_t  BIOCCD_Mode;
   uint8_t  BIOCCD_Video;
   uint8_t  SDRAM_Bypass;
-};
+} BIOREG;
 
 
 
@@ -152,7 +158,7 @@
  *
  * List of the function could be control
  */
-enum CONTROL_ID
+typedef enum CONTROL_ID
 {
   CONTROL_BRIGHTNESS = 0, //!< image brightness
   CONTROL_CONTRAST,       //!< image contrast
@@ -220,23 +226,23 @@
   CAM_SINGLEFRAMEMODE,
   CAM_LIVEVIDEOMODE,
   CONTROL_MAX_ID
-};
+} CONTROL_ID;
 
 /**
  * debayer mode for mono to color */
-enum BAYER_ID
+typedef enum BAYER_ID
 {
   BAYER_GB = 1,
   BAYER_GR,
   BAYER_BG,
   BAYER_RG
-};
+} BAYER_ID;
 
-enum CodecID
+typedef enum CodecID
 {
   NONE_CODEC,
   H261_CODEC
-};
+} CodecID;
 
 typedef struct _QHYCamMinMaxStepValue
 {
